client_type = bootloader
bootloader_prompt = Start:
interrupt_boot_prompt = Marvell 88e1119
interrupt_boot_command = ssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssssss
busybox_http_port = 8080
master_str = root@linaro-server:~#
master_testboot_label = TESTBOOT
ipaddr = 192.168.1.2
gatewayip = 192.168.1.1
netmask = 255.255.255.0
master_ftp_server = 192.168.1.1
master_nfs_server = 192.168.1.1
master_nfs_path = /srv/ftp/master-d01
use_lava_tmpdir = True
send_char = True

boot_cmds = 1

boot_cmds_master = sendline b,
                   expect D01,
                   sendline ifconfig -s eth0 %(ipaddr)s %(netmask)s %(gatewayip)s,
                   expect D01,
                   sendline provision %(master_ftp_server)s -u anonymous -p anonymous -f .text,
                   expect D01,
                   sendline provision %(master_ftp_server)s -u anonymous -p anonymous -f .monitor,
                   expect D01,
                   sendline provision %(master_ftp_server)s -u anonymous -p anonymous -f .kernel,
                   expect D01,
                   sendline provision %(master_ftp_server)s -u anonymous -p anonymous -f .filesystem,
                   expect D01,
                   sendline changelinuxatag,
                   expect core_tag.flags,
                   sendline 1,
                   expect core_tag.pagesize,
                   sendline 1000,
                   expect core_tag.rootdev,
                   sendline 0,
                   expect mem_tag.start,
                   sendline 0,
                   expect mem_tag.size,
                   sendline 10000000,
                   expect initrd2_tag.start,
                   sendline 3800040,
                   expect cmdline_tag.cmdline,
                   sendline 'console=ttyS0,115200 root=/dev/nfs root=/dev/nfs rw nfsroot=%(master_nfs_server)s:%(master_nfs_path)s,tcp,hard,intr ip=dhcp',
                   expect D01,
                   sendline setlinuxatag,
                   expect D01,
                   sendline reboot

boot_cmds_ramdisk = sendline s,
                    expect Start,
                    sendline 2,
                    expect Choice,
                    sendline 3,
                    expect Delete entry,
                    sendline 1,
                    expect Choice,
                    sendline 1,
                    expect Select the Boot Device,
                    sendline 5,
                    expect Get the IP address from DHCP,
                    sendline y,
                    expect Get the TFTP server IP address:,
                    sendline {SERVER_IP},
                    expect File path of the EFI Application or the kernel,
                    sendline {KERNEL},
                    expect Has FDT support,
                    sendline y,
                    expect Add an initrd,
                    sendline y,
                    expect Get the IP address from DHCP,
                    sendline y,
                    expect Get the TFTP server IP address,
                    sendline {SERVER_IP},
                    expect File path of the initrd,
                    sendline {RAMDISK},
                    expect Arguments to pass to the binary,
                    sendline "console=ttyS0,115200n8 root=/dev/ram0 ip=dhcp",
                    expect Description for this new Entry,
                    sendline TFTP Ramdisk Boot,
                    expect Choice,
                    sendline 4,
                    expect Select the Boot Device,
                    sendline 5,
                    expect Get the IP address from DHCP,
                    sendline y,
                    expect Get the TFTP server IP address,
                    sendline {SERVER_IP},
                    expect File path of the FDT blob,
                    sendline {DTB},
                    expect Choice,
                    sendline 5,
                    expect Start,
                    sendline 2,
                    expect Choice:,
                    sendline 2,
                    expect Update entry,
                    sendline 1,
                    expect File path of the EFI Application or the kernel,
                    sendline ,
                    expect Has FDT support,
                    sendline y,
                    expect Keep the initrd,
                    sendline y,
                    expect File path of the initrd,
                    sendline ,
                    expect Arguments to pass to the binary,
                    sendcontrol H,
                    sendcontrol H,
                    sendcontrol H,
                    sendcontrol H,
                    sendcontrol H,
                    sendcontrol H,
                    sendcontrol H,
                    sendcontrol H,
                    sendcontrol H,
                    sendcontrol H,
                    sendline "console=ttyS0,115200n8 root=/dev/ram0 ip=dhcp",
                    expect Description for this new Entry,
                    sendline ,
                    expect Choice,
                    sendline 5,
                    sendline 1

boot_cmds_nfs = sendline s,
                expect Start,
                sendline 2,
                expect Choice,
                sendline 3,
                expect Delete entry,
                sendline 1,
                expect Choice,
                sendline 1,
                expect Select the Boot Device,
                sendline 5,
                expect Get the IP address from DHCP,
                sendline y,
                expect Get the TFTP server IP address:,
                sendline {SERVER_IP},
                expect File path of the EFI Application or the kernel,
                sendline {KERNEL},
                expect Has FDT support,
                sendline y,
                expect Add an initrd,
                sendline n,
                expect Arguments to pass to the binary,
                sendline "console=ttyS0,115200 root=/dev/nfs root=/dev/nfs rw nfsroot={SERVER_IP}:{NFSROOTFS},tcp,hard,intr ip=dhcp",
                expect Description for this new Entry,
                sendline TFTP NFS Boot,
                expect Choice,
                sendline 4,
                expect Select the Boot Device,
                sendline 5,
                expect Get the IP address from DHCP,
                sendline y,
                expect Get the TFTP server IP address,
                sendline {SERVER_IP},
                expect File path of the FDT blob,
                sendline {DTB},
                expect Choice,
                sendline 5,
                expect Start,
                sendline 2,
                expect Choice:,
                sendline 2,
                expect Update entry,
                sendline 1,
                expect File path of the EFI Application or the kernel,
                sendline ,
                expect Has FDT support,
                sendline y,
                expect  Add an initrd:,
                sendline n,
                expect Arguments to pass to the binary,
                sendcontrol H,
                sendcontrol H,
                sendcontrol H,
                sendcontrol H,
                sendcontrol H,
                sendcontrol H,
                sendcontrol H,
                sendcontrol H,
                sendcontrol H,
                sendcontrol H,
                sendline "console=ttyS0,115200 root=/dev/nfs root=/dev/nfs rw nfsroot={SERVER_IP}:{NFSROOTFS},tcp,hard,intr ip=dhcp",
                expect Description for this new Entry,
                sendline ,
                expect Choice,
                sendline 5,
                sendline 1

boot_options =
    boot_cmds

[boot_cmds]
default = boot_cmds
